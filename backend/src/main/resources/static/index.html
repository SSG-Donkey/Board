<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>당신의 나눔은 귀하다 당나귀</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="icon" href="./assets/favicon.ico">
    <link rel="stylesheet" href="./css/general.css"/>
    <link rel="stylesheet" href="./css/main.css"/>
</head>
<body>
<!-- header -->

<section class="home-main-section background-gray">
    <div class="home-hot-content">
        <div class="container">
            <div class="row justify-content-center mb-4">
                <div class="col-auto">
                    <div class="btn-group" role="group" aria-label="Category Buttons">
                        <a href="/board.html" class="btn btn-outline-primary">전체</a>
                        <a href="/board.html?category=1" class="btn btn-outline-primary" id="1">도서</a>
                        <a href="/board.html?category=2" class="btn btn-outline-primary">의류</a>
                        <a href="/board.html?category=3" class="btn btn-outline-primary">전자기기</a>
                        <a href="/board.html?category=4" class="btn btn-outline-primary">가구</a>
                        <a href="/board.html?category=5" class="btn btn-outline-primary">악세사리</a>
                        <a href="/board.html?category=6" class="btn btn-outline-primary">생활용품</a>
                        <a href="/board.html?category=9" class="btn btn-outline-primary">기타</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <h1 class="home-main-title home-hot-title">최근 올라온 나눔 물품</h1>
    <div class="items-wrap">

    </div>
    <div class="text-center">
        <a href="/board.html" class="home-link-text home-text">인기매물 더 보기</a>
    </div>
</section>
<!-- main section -->
<main>
    <section id="home-main-section-top">
        <div class="home-main-top">
            <div class="home-main-desc">
                <h1 class="home-main-title">
                    당신 근처의
                    <br>
                    당나귀마켓
                </h1>
                <p class="home-text">
                    중고 거래부터 동네 정보까지, 이웃과 함께해
                    <br>
                    가깝고 따뜻한 당신의 근처를 만들어요.
                </p>
            </div>
            <div class="home-main-image">
                <img class="home-main-image" src="./assets/image/prototype_01.png" alt="당신 근처의 당나귀마켓"/>
            </div>
        </div>
    </section>
    <section class="home-main-section">
        <div class="home-main-content">
            <div class="home-main-image-01">
                <img class="home-main-image-01" src="./assets/image/prototype_02.png" alt="우리 동네 중고 직거래 사진"/>
            </div>
            <div class="home-main-desc">
                <h1 class="home-main-title">
                    우리 동네
                    <br>
                    중고 직거래 마켓
                </h1>
                <p class="home-text">
                    동네 주민들과 가깝고 따뜻한 거래를 지금 경험해보세요.
                </p>
                <div class="home-buttons">
                    <a class="home-button button-text" href="">인기매물 보기</a>
                    <a class="home-button button-text B-1" href="">믿을 수 있는 중고거래</a>
                </div>
            </div>
        </div>
    </section>
    <section class="home-main-section background-pale-green">
        <div class="home-main-content home-main-reverse">
            <div class="home-main-image-02">
                <img class="home-main-image-02" src="./assets/image/prototype_03.png" alt="이웃과 함께 하는 동네생활"/>
            </div>
            <div class="home-main-desc">
                <h1 class="home-main-title">
                    이웃과 함께 하는
                    <br>
                    동네생활
                </h1>
                <p class="home-text">
                    우리 동네의 다양한 이야기를 이웃과 함께 나누어요.
                </p>
                <ul class="home-story-list">
                    <li class="home-story-list-item">
                        <div class="icon-story icon-story-01"></div>
                        <div class="home-story-title">우리동네질문</div>
                        <div class="home-story-text">궁금한 게 있을 땐 이웃에게 물어보세요.</div>
                    </li>
                    <li class="home-story-list-item">
                        <div class="icon-story icon-story-02"></div>
                        <div class="home-story-title">동네분실센터</div>
                        <div class="home-story-text">무언가를 잃어버렸을 때, 함께 찾을 수 있어요.</div>
                    </li>
                    <li class="home-story-list-item">
                        <div class="icon-story icon-story-03"></div>
                        <div class="home-story-title">동네모임</div>
                        <div class="home-story-text">관심사가 비슷한 이웃과 온오프라인으로 만나요.</div>
                    </li>
                </ul>
            </div>
        </div>
    </section>
    <section class="home-main-section">
        <div class="home-main-content">
            <div class="home-main-image-03">
                <img class="home-main-image-03" src="./assets/image/prototype_04.png" alt="우리 동네 중고 직거래 사진"/>
            </div>
            <div class="home-main-desc">
                <h1 class="home-main-title">
                    내 근처에서 찾는
                    <br>
                    동네가게
                </h1>
                <p class="home-text">
                    우리 동네 가게를 찾고 있나요?
                    <br>
                    동네 주민이 남긴 진짜 후기를 함께 확인해보세요!
                </p>
                <div class="home-buttons">
                    <a class="home-button button-text" href="">당나귀마켓 동네가게 찾기</a>
                </div>
            </div>
        </div>
    </section>

    <section class="home-keywords-content">
        <h3 class="home-main-title">
            <a class="home-link-text home-text">중고거래 인기검색어</a>
        </h3>
        <ul class="top-keywords-list">
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">자전거</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">의자</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">냉장고</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">노트북</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">컴퓨터</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">모니터</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">아이폰</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">책상</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">아이패드</a>
            </li>
            <li class="keyword-item home-text">
                <a class="keyword-link" href="">가방</a>
            </li>
        </ul>
    </section>
</main>

<!-- footer -->

<script src="/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $.get('./common/header.html', function (html) {
        $('body').prepend(html);
    });
    $.get('./common/footer.html', function (html) {
        $('body').after(html)
    });


    const postsList = document.getElementById('posts-list');

    //메인 화면 뿌리기
    fetch('/api_post/getRecentPost')
        .then(response => response.json())
        .then(data => {
            const itemsWrap = document.querySelector('.items-wrap');
            data.forEach(post => {
                const itemElement = document.createElement('article');
                itemElement.classList.add('item');
                itemElement.innerHTML = `
        <a class="item-link" href="/boardDetail.html?post=${post.postNo}">
          <div class="item-photo">
            <img src="${post.postFile}" alt="${post.postTitle}">
          </div>
          <div class="item-desc">
            <h2 class="item-name">${post.postTitle}</h2>
            <div class="item-postContent">${post.postContent}</div>
            <div class="item-region">${post.postCategory}</div>
            <div class="item-counts">
              <span>관심 1</span>
              ·
              <span>채팅 1</span>
            </div>
          </div>
        </a>
      `;
                itemsWrap.appendChild(itemElement);
            });
        })
        .catch(error => console.error('Error loading posts:', error));

    // URL 매개변수 값 가져오기
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');

    window.onload = function () {
        // URL 매개변수 값 가져오기
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get('category');

        // loadCategoryPosts 함수 호출
        loadCategoryPosts(category);
    };

    //카테고리 누를 때 페이지 이동
    function loadCategoryPosts(category) {
        fetch(`/api_post/category/${category}`)
            .then(response => response.json())
            .then(data => {
                const itemsWrap = document.querySelector('.items-wrap');
                itemsWrap.innerHTML = ''; // 기존 내용 초기화

                data.forEach(post => {
                    const itemElement = document.createElement('article');
                    itemElement.classList.add('item');
                    itemElement.innerHTML = `
                            <a class="item-link" href="/boardDetail.html?post=${post.postNo}">
                                <div class="item-photo">
                                    <img src="${post.postFile}" alt="${post.postTitle}">
                                </div>
                                <div class="item-desc">
                                    <h2 class="item-name">${post.postTitle}</h2>
                                    <div class="item-postContent">${post.postContent}</div>
                                    <div class="item-region">${post.postCategory}</div>
                                    <div class="item-counts">
                                    </div>
                                </div>
                            </a>
                        `;
                    itemsWrap.appendChild(itemElement);
                });
            })
            .catch(error => console.error('Error loading posts:', error));
    }
</script>
</body>

</html>